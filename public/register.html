<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Readify</title>
    <link
      href="https://cdn.boxicons.com/fonts/basic/boxicons.min.css"
      rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="./assets/css/root.css" />
    <link rel="stylesheet" href="./assets/css/navbar.css" />
    <link rel="stylesheet" href="./assets/css/loginAndRegister.css" />
  </head>
  <body>
    <div class="alert"></div>

    <header>
      <nav class="navbar">
        <div class="navbar-left">
          <img src="assets/images/logos/logo_transparent.png" alt="Logo" />
        </div>
        <ul class="navbar-center">
          <li><a href="./index.html">Home</a></li>
          <li><a href="#">Books</a></li>
          <li><a href="#">Reviews</a></li>
          <li><a href="#">Admin</a></li>
        </ul>
        <div class="navbar-right">
          <div class="icon-row">
            <i class="fa fa-search" id="search-icon"></i>
            <a href="#"><i class="fa fa-shopping-cart"></i></a>
            <a href="#"><i class="fa fa-user"></i></a>
            <i class="fa fa-bars menu-toggle" id="menu-toggle"></i>
          </div>
        </div>
      </nav>
      <div class="search-panel" id="search-panel">
        <input
          type="text"
          id="search-input-field"
          placeholder="Search books..." />
      </div>
      <div id="toggle-handler-search"></div>
      <div id="toggle-handler-menu"></div>
      <div class="navbar-background"></div>
    </header>

    <div class="page page-register">
      <div class="register">
        <form id="registerForm" enctype="multipart/form-data">
          <h2>Hello! WelcomeðŸ‘‹</h2>
          <h3>Register</h3>
          <div class="inputs">
            <div class="inputs-left">
              <div class="input-box profile-photo">
                <div class="image">
                  <div class="img">
                    <img
                      id="preview"
                      src="./assets/images/profile_images/profiledefault.png"
                      alt="" />
                  </div>
                  <label for="profilePhoto"><i class="bxr bxs-edit"></i></label>
                  <input
                    type="file"
                    name="profilePhoto"
                    id="profilePhoto"
                    hidden />
                </div>
              </div>
              <div class="input-box">
                <input
                  type="text"
                  name="fname"
                  required
                  placeholder="First Name" />
                <button tabindex="-1" type="button">
                  <i class="bxr bxs-user"></i>
                </button>
                <span class="input-type"><p>First Name</p></span>
              </div>
              <div class="input-box">
                <input
                  type="text"
                  name="lname"
                  required
                  placeholder="Last Name" />
                <button tabindex="-1" type="button">
                  <i class="bxr bxs-user"></i>
                </button>
                <span class="input-type"><p>Last Name</p></span>
              </div>
            </div>
            <div class="inputs-right">
              <div class="input-box">
                <input
                  type="text"
                  name="email"
                  required
                  placeholder="Enter a Valid Email" />
                <button tabindex="-1" type="button">
                  <i class="bx bxs-envelope"></i>
                </button>
                <span class="input-type"><p>Email</p></span>
              </div>
              <div class="input-box">
                <input
                  type="text"
                  name="tellno"
                  required
                  placeholder="07XXXXXXXX" />
                <button tabindex="-1" type="button">
                  <i class="bxr bxs-phone"></i>
                </button>
                <span class="input-type"><p>Phone</p></span>
              </div>
              <div class="input-box">
                <input
                  type="text"
                  name="address"
                  required
                  placeholder="Enter Full Address" />
                <button tabindex="-1" type="button">
                  <i class="bxr bxs-location-alt"></i>
                </button>
                <span class="input-type"><p>Adress</p></span>
              </div>
              <div class="input-box">
                <input
                  id="passIn"
                  type="password"
                  name="password"
                  required
                  placeholder="Enter a Strong Password" />
                <button
                  tabindex="-1"
                  id="passBtn"
                  type="button"
                  onclick="toggleView()">
                  <i class="bx bxs-eye-slash"></i>
                </button>
                <span class="input-type"><p>Password</p></span>
              </div>
              <div class="input-box">
                <input
                  id="passInC"
                  type="password"
                  name="passwordC"
                  required
                  placeholder="Confirm Password" />
                <button
                  tabindex="-1"
                  id="passBtnC"
                  type="button"
                  onclick="toggleViewC()">
                  <i class="bx bxs-eye-slash"></i>
                </button>
                <span class="input-type"><p>Confirm Password</p></span>
              </div>
            </div>
          </div>

          <button type="submit" class="btn"><p>Signup</p></button>

          <div class="move-links">
            <p>
              <a href="login.html"> Already have an account? <u>Signin</u> </a>
            </p>
          </div>
        </form>
      </div>
    </div>

    <script src="./assets/js/reusableFunctions.js"></script>
    <script src="./assets/js/navbar.js"></script>
    <script src="./assets/js/login&register.js"></script>
    <script>
      const profilePhoto = document.getElementById("profilePhoto");
      const preview = document.getElementById("preview");

      connectBackEnd({
        backendUrl: "../backend/register.php",
        formId: "registerForm",
        callback: (data) => {
          if (data.success) addAlert(data.message, false);
          if (data.error) addAlert(data.error);
          if (data.redirect) redirect(data.redirect);
        },
      });

      profilePhoto.addEventListener("change", () => {
        const file = profilePhoto.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = () => {
            preview.src = reader.result;
          };
          reader.readAsDataURL(file);
        }
      });
    </script>
  </body>
</html>
